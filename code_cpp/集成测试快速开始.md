# 集成测试快速开始

## 最简单的运行方式

```bash
cd ~/软工/code_cpp

# 清理旧文件
make clean

# 编译并运行集成测试
make test-integration
```

## 预期输出

如果测试成功，你会看到：

```
Running Integration tests...
./bin/test_integration.exe
Running main() from ./googletest/src/gtest_main.cc
[==========] Running 8 tests from 2 test suites.
[----------] 4 tests from StorageSearchIntegrationTest
[ RUN      ] StorageSearchIntegrationTest.SaveLoadAndSearchByKeyword
[       OK ] StorageSearchIntegrationTest.SaveLoadAndSearchByKeyword (X ms)
[ RUN      ] StorageSearchIntegrationTest.SaveLoadAndSearchByCategory
[       OK ] StorageSearchIntegrationTest.SaveLoadAndSearchByCategory (X ms)
[ RUN      ] StorageSearchIntegrationTest.SaveLoadAndSearchByTime
[       OK ] StorageSearchIntegrationTest.SaveLoadAndSearchByTime (X ms)
[ RUN      ] StorageSearchIntegrationTest.SaveLoadAndMultipleSearchCriteria
[       OK ] StorageSearchIntegrationTest.SaveLoadAndMultipleSearchCriteria (X ms)
[----------] 4 tests from StorageSearchIntegrationTest (X ms total)

[----------] 4 tests from StorageStatisticsIntegrationTest
[ RUN      ] StorageStatisticsIntegrationTest.SaveLoadAndGenerateTimeSummary
[       OK ] StorageStatisticsIntegrationTest.SaveLoadAndGenerateTimeSummary (X ms)
[ RUN      ] StorageStatisticsIntegrationTest.SaveLoadAndGenerateCategorySummary
[       OK ] StorageStatisticsIntegrationTest.SaveLoadAndGenerateCategorySummary (X ms)
[ RUN      ] StorageStatisticsIntegrationTest.SaveLoadAndGenerateFullPeriodSummary
[       OK ] StorageStatisticsIntegrationTest.SaveLoadAndGenerateFullPeriodSummary (X ms)
[ RUN      ] StorageStatisticsIntegrationTest.SaveLoadCategoriesAndUseInStatistics
[       OK ] StorageStatisticsIntegrationTest.SaveLoadCategoriesAndUseInStatistics (X ms)
[----------] 4 tests from StorageStatisticsIntegrationTest (X ms total)

[==========] 8 tests from 2 test suites ran. (X ms total)
[  PASSED  ] 8 tests.
```

## 如果遇到问题

### 问题1: 找不到 test-integration 目标
**解决方法**: 确保 Makefile 中有 test-integration 规则（已添加）

### 问题2: 编译错误
**解决方法**: 检查 GTest 是否已安装
```bash
ls /usr/include/gtest/gtest.h
```

### 问题3: 权限错误
**解决方法**: 清理临时目录
```bash
make clean
rm -rf tmp_test_integration*
```

## 测试内容

### 测试组1: Storage + Search 集成（4个测试）
1. 保存加载记录并按关键词搜索
2. 保存加载记录并按类别搜索
3. 保存加载记录并按时间范围搜索
4. 组合多个搜索条件

### 测试组2: Storage + Statistics 集成（4个测试）
1. 保存加载记录并生成时间统计
2. 保存加载记录并生成类别统计
3. 保存加载记录并生成全期间统计
4. 保存加载类别并在统计中使用

## 截图建议

运行测试后，请截图：
1. 测试执行命令
2. 测试输出结果（显示所有8个测试通过）
3. 测试统计信息

详细说明请查看：`如何运行集成测试.md`

