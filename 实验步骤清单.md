# 实验四：软件分析 - 任务清单

## 📋 实验概览
- **截止日期**：2025年12月13日 00:10
- **提交格式**：`实验4_学号_姓名.zip`
- **核心任务**：使用三种工具分析代码缺陷，评估工具性能

---

## 🎯 主要任务步骤

### 阶段一：准备项目代码
- [ ] **确定项目**
  - 选择一个已有的项目（或创建一个测试项目）
  - 确定项目使用的编程语言（C/C++、Java、Python、JavaScript等）

### 阶段二：使用三种分析工具

#### 1️⃣ 静态分析工具
- [ ] **选择工具**（根据项目语言选择）：
  - C/C++：Clang-Tidy 或 Cppcheck
  - Java：SpotBugs 或 SonarQube
  - Python：Pylint 或 Bandit
  - JavaScript：ESLint 或 JSHint
- [ ] **配置工具**：根据工具文档进行配置
- [ ] **运行扫描**：对项目代码进行扫描
- [ ] **收集结果**：记录缺陷类型、位置等信息

#### 2️⃣ 大语言模型分析
- [ ] **选择模型**：ChatGPT、Github Copilot、Google Gemini、通义千问、文心一言等
- [ ] **设计Prompt**：根据项目特点设计分析prompt
- [ ] **输入代码**：将关键模块或全部代码输入模型
- [ ] **记录结果**：保存模型的分析结果

#### 3️⃣ 形式化工具
- [ ] **选择工具**：
  - C/C++/Python：ESBMC (https://github.com/esbmc/esbmc)
  - Java：JBMC (https://www.cprover.org/jbmc/)
  - 如果无法使用，则另选一个静态分析工具
- [ ] **转换代码**：将代码转换为工具可接受的格式
- [ ] **运行验证**：执行验证过程
- [ ] **记录结果**：保存工具报告的不一致或缺陷

### 阶段三：植入代码缺陷
- [ ] **植入缺陷类型**：
  - Memory Leak（内存泄漏）
  - Double Free（重复释放）
  - NULL Pointer Dereference（空指针解引用）
- [ ] **记录位置**：记录植入缺陷的位置和类型

### 阶段四：评估工具能力
- [ ] **分析结果**：
  - 检查每个工具报告的缺陷
  - 区分 **True Positive**（真实存在的缺陷）和 **False Positive**（误报）
- [ ] **创建JSON文件**（每个工具需要2个文件）：
  - `true_positive.json` - 真实缺陷报告
  - `false_positive.json` - 误报记录
- [ ] **限制数量**：每个工具最多检查10个缺陷报告
- [ ] **分析误报原因**：对比工具能力，分析误报可能的原因

### 阶段五：编写实验报告
- [ ] **报告内容**：
  1. **三种分析工具的检测过程**
     - 选择的工具
     - 工具运行方式（配置或prompt）
     - 运行结果
  
  2. **对分析工具真实报告和误报情况的评估**
     - 分析哪些是真实存在的缺陷
     - 分析哪些是误报
     - 列举植入的代码缺陷，说明各工具能否正确检查
     - 评估误报率，讨论可能的原因
  
  3. **对选取的分析工具能力的整体评价和比较**
     - 比较每种工具在检测不同类型缺陷方面的能力
     - 提出在类似项目中推荐使用哪些工具或工具组合

### 阶段六：整理提交文件
- [ ] **创建文件夹结构**：
```
实验4_学号_姓名/
├── 实验报告.pdf
├── project/                    (项目代码)
├── flaw_report/                (缺陷报告文件夹)
│   ├── CppCheck/              (静态分析工具的结果)
│   │   ├── true_positive.json
│   │   └── false_positive.json
│   ├── ChatGPT/               (大语言模型的结果)
│   │   ├── true_positive.json
│   │   └── false_positive.json
│   └── ESBMC/                 (形式化工具验证的结果)
│       ├── true_positive.json
│       └── false_positive.json
└── (其他可选文件夹，如工具配置、脚本等)
```
- [ ] **打包为zip**：命名为 `实验4_学号_姓名.zip`

---

## 📝 JSON文件格式示例

### true_positive.json 和 false_positive.json 格式：
```json
{
    "1": {
        "CWE": "CWE-401",
        "name": "MemoryLeakOnRealloc",
        "File": "stdio/vcscanf.c",
        "Line": "355",
        "At": "else if (c == 'n' || c == 'N') { c = BUFFER;"
    },
    "2": {
        "CWE": "CWE-476",
        "name": "nullPointerRedundantCheck",
        "File": "src/lexer.c",
        "Line": "1604",
        "At": "struct yyguts_t * yyg = (struct yyguts_t*)yyscanner;"
    }
}
```

---

## ⚠️ 重要提醒
1. **每个工具最多检查10个缺陷报告**
2. **必须区分True Positive和False Positive**
3. **需要植入代码缺陷进行测试**
4. **截止日期**：2025年12月13日 00:10
5. **提交平台**：cslab-cms

---

## 🚀 建议执行顺序
1. 先确定项目并了解其代码结构
2. 运行三种工具，收集所有报告
3. 植入代码缺陷
4. 重新运行工具，评估结果
5. 整理JSON文件
6. 编写实验报告
7. 整理文件夹结构并打包提交






