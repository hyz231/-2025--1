实验 5： 软件测试与修复
一、实验目的
了解并掌握单元测试，基于已完成的实验三、实验四，对自己的项目进行单元测试。
了解并掌握测试覆盖率。
了解并掌握简单的集成测试。
学习并实践持续集成（CI），实现自动化测试。
学习并掌握使用集成式AI助手进行缺陷定位和修复的方法。
二、实验内容
单元测试与覆盖率分析：

针对之前实验（实验三、实验四）中自己实现并分析的项目，编写并执行单元测试用例，对工具的各个子功能的正确性进行测试。
测试用例应尽可能覆盖程序中各个边界，可以自行选择一种及以上覆盖率（包括但不限于语句覆盖、判定覆盖、条件覆盖、路径覆盖等），要求从该项目中选择 2 个子功能，对于每个子功能测试覆盖率达到 80%以上或测试用例达到 10 条以上。
本实验不限制测试工具，C++推荐使用GTest，Java推荐JUnit，Python推荐pytest。
集成测试：

基于单元测试对工具进行集成测试，可以自行选择自顶向下、自底向上或其他的测试方法，进行 2 组以上集成测试。
模糊测试：

使用模糊测试工具（如afl++）对自己实现的项目进行测试(若自己实现的项目无法使用此类工具进行模糊测试，也可选择其他项目进行测试，建议对afl++使用c或c++项目)，收集能产生崩溃的测试用例，并复现崩溃。
afl++的使用教程参考:https://www.jianshu.com/p/b7936d29be28
持续集成 (CI) 配置：

为你的项目配置持续集成流程。当代码推送到代码仓库时，自动执行所有单元测试。

推荐使用 GitHub Actions。

CI配置指导：

 在你的项目根目录下，创建 .github/workflows/ci.yml 文件。

以下是一个 Python + Pytest 项目的配置示例，请根据你的项目语言和框架进行修改：

# 工作流名称
name: Python Project CI
# 触发工作流的事件：当有代码推送到 main 分支或有人向 main 分支发起 Pull Request 时触发
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
# 工作流包含的任务 (jobs)
jobs:
  build-and-test:
    # 运行此任务的操作系统环境
    runs-on: ubuntu-latest
    # 任务包含的步骤 (steps)
    steps:
    # 第一步：检出你的代码库
    - name: Checkout repository
      uses: actions/checkout@v4
    # 第二步：设置Python环境
    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.10' # 根据你的项目指定Python版本
    # 第三步：安装项目依赖
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt  # 假设你的依赖项在 requirements.txt 中
        pip install pytest # 安装测试框架
    # 第四步：运行单元测试
    - name: Run tests with pytest
      run: |
        pytest
 提交 ci.yml 文件到你的 GitHub 仓库，然后前往仓库的 "Actions" 标签页查看运行结果。

缺陷定位与修复：

根据各类测试结果以及实验 4 中的静态分析结果定位并修复出现的错误。
使用集成式AI助手(如 Cursor, CodeRuby, GitHub Copilot 等)进行辅助修复，体验在IDE中直接与AI交互完成代码分析、修复和重构的现代化开发流程。
三、实验提交
实验报告
在本次实验中，你的报告可以分为五个部分:

单元测试报告，包括：

测试目的、测试对象、测试环境、测试工具等。
以适合的形式给出各个单元测试的测试目的、测试用例、预期输出、实际输出、测试覆盖率（说明采用的是何种覆盖率）。
测试结果分析。
单元测试总体测试覆盖率说明。
要求提供证明进行了单元测试的截图，如测试用例、测试结果等。
集成测试报告，包括：

测试目的、测试对象、测试环境、测试工具、测试方法等。
以适合的形式给出各个测试的测试目的、测试用例、预期输出、实际输出等。
测试结果分析。
要求提供证明进行了集成测试的截图，如测试用例、测试结果等。
模糊测试报告，包括：

模糊测试工具的选取及安装，要求有安装截图。
模糊测试工具的使用说明，要求有使用截图。
记录模糊测试工具产生的能造成崩溃的测试用例，复现崩溃并截图记录，若无法检测到崩溃，则需要证明至少运行了5小时。
持续集成 (CI) 报告，包括：

提供你的 .github/workflows/ci.yml 工作流文件的完整内容，并对关键配置（如触发条件、主要步骤）进行注释说明。
提供一张 GitHub Actions 运行成功的截图，截图中应清晰显示你的工作流名称、触发事件以及所有步骤成功执行的状态（绿色对勾）。
程序修复报告，包括：

说明你选择了哪款集成式AI助手（如 Cursor, CodeRuby, GitHub Copilot），并附上其在你的IDE中配置好的截图。
根据测试结果分析并定位到缺陷所在的具体代码位置，修复至少3个缺陷，附加代码修改截图及说明。如果缺陷数量不足3个，可以类比实验四，主动植入缺陷，并进行修复。
AI辅助修复过程记录：你需要详细记录与AI的交互过程。
提问（Prompts）截图：展示你在IDE中向AI助手的提问，体现你是如何描述问题和上下文的。
AI建议截图：展示AI给出的关键修复建议、代码片段或分析。
分析与采纳：说明你对AI建议的判断和思考。AI的建议是否完全正确？你做了哪些修改？为什么？
最终修复结果：附上最终采纳和修改后的代码截图，并解释修复的原理。
实验报告应该清晰、简明、有条理，有良好的格式和结构。

严禁抄袭。

提交内容
在本次实验中，你需要提交一个打包成 zip 的文件夹，命名为：实验5_学号_姓名.zip。其压缩前的格式为：

实验5_学号_姓名
├── report_学号_姓名.pdf
└── code_学号_姓名.zip
     ├── code1.c/cpp/...
     ├── code2.c/cpp/...
     └── ...
提交方式
通过 cslab-cms 系统发布的作业提交，截止日期：2026 年 1 月 03 日 00.10 。